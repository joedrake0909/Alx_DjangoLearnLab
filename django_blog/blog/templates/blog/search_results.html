{% extends 'blog/base.html' %}

{% block title %}Search Results{% endblock %}

{% block content %}
<div class="search-results-container">
    <h1>Search Results</h1>
    
    {% if query %}
        <p class="search-query">Showing results for: <strong>"{{ query }}"</strong></p>
        
        {% if posts %}
            <p class="results-count">Found {{ posts.count }} post{{ posts.count|pluralize }}</p>
            
            {% for post in posts %}
                <article class="post-preview">
                    <h2><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h2>
                    <p class="post-meta">
                        By <strong>{{ post.author.username }}</strong> on {{ post.published_date|date:"F d, Y" }}
                    </p>
                    {% if post.tags.all %}
                        <div class="post-tags">
                            Tags: 
                            {% for tag in post.tags.all %}
                                <a href="{% url 'tagged-posts' tag.name %}" class="tag-link">#{{ tag.name }}</a>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <p class="post-content">{{ post.content|truncatewords:50 }}</p>
                    <a href="{% url 'post-detail' post.pk %}" class="read-more">Read more →</a>
                </article>
                <hr>
            {% endfor %}
        {% else %}
            <p class="no-results">No posts found matching your search.</p>
            <p>Try different keywords or <a href="{% url 'post-list' %}">browse all posts</a>.</p>
        {% endif %}
    {% else %}
        <p>Enter a search term to find posts.</p>
    {% endif %}
    
    <div class="search-navigation">
        <a href="{% url 'post-list' %}" class="btn btn-link">← Back to all posts</a>
    </div>
</div>
{% endblock %}
